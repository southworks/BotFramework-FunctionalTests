parameters:
  - name: env
    displayName: Environment variables to share to the test process
    type: object
    default: {}

steps:
  - powershell: |
      "$(Testing)"
      Write-Host "Using an input-macro works: $(mySecret)"
      Write-Host "Using the env var directly does not work: $env:MYSECRET"
      Write-Host "Using a global secret var mapped in the pipeline does not work either: $env:GLOBAL_MYSECRET"
      Write-Host "Using a global non-secret var mapped in the pipeline works: $env:GLOBAL_MY_MAPPED_ENV_VAR" 
      Write-Host "Using the mapped env var for this task works and is recommended: $env:MY_MAPPED_ENV_VAR"
      Write-Host "Using the mapped env var for this task works and is recommended: $env:MY_MAPPED_ENV_VAR2"
    env: ${{ parameters.env }}